(this.webpackJsonpvisualization=this.webpackJsonpvisualization||[]).push([[0],{77:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);a(77);var r=a(10),n=(a(82),a(83),a(6)),c=a(39),o=a(11),s=a(0),i=a(40),d=(a(85),a(13)),h=a(4);function u(e){return Object(h.jsxs)(d.a,{className:"d-flex flex-column h-100 py-1",children:[Object(h.jsxs)(d.a.Group,{className:"graph-input-textarea",children:[Object(h.jsx)(d.a.Label,{className:"text-center w-100",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u0440\u0430\u0444 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 GraphML"}),Object(h.jsx)(d.a.Control,{as:"textarea",rows:8,value:e.value,defaultValue:e.defaultValue,onChange:function(t){var a=t.target.value;return e.onChange(a)}})]}),Object(h.jsx)(d.a.Group,{className:"graph-input-file border-top border-secondary w-100",children:Object(h.jsx)(d.a.File,{className:"text-center",accept:"text/xml",onChange:function(t){var a=t.target.files,r=null===a||void 0===a?void 0:a[0];if(void 0!==r){var n=new FileReader;n.onload=function(t){e.onChange(t.target.result)},n.readAsText(r)}}})})]})}var l,f=a(8),x=a(41),m=a(42),v=a(43),b=a(52),j=a(37),p=a(47);function g(e,t){void 0===l&&(l=document.createElement("canvas"));var a=l.getContext("2d");return a.font=t,a.measureText(e).width}var w=a(46);function N(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e[t];if(void 0===r&&a)throw Error("No ".concat(t," specified for object ").concat(e));return r}function O(e){try{return function(e){if(void 0===e.graphml)throw Error("No graphml tag specified");if(void 0===e.graphml.graph)throw Error("No graph tag specified");var t=e.graphml.graph,a=t.node,r=t.edge,n=new Set;void 0!==a&&(Array.isArray(a)||(a=[a]),a.forEach((function(e){var t=N(e,"@_id");n.add(t)})));var c=[];return void 0!==r&&(Array.isArray(r)||(r=[r]),r.forEach((function(e){var t=N(e,"@_source");if(!n.has(t))throw Error("Node ".concat(t," was not specified"));var a=N(e,"@_target");if(!n.has(a))throw Error("Node ".concat(a," was not specified"));c.push({from:t,to:a})}))),{nodes:n,edges:c}}(Object(w.parse)(e,{ignoreAttributes:!1}))}catch(t){return}}var y=a(51);function I(e,t){return e.h*e.w-t.h*t.w||Math.abs(e.h-e.w)-Math.abs(t.h-t.w)||e.h-t.h}function E(e,t){var a=new Map;return function e(r){var n=t.get(r);if(0!==n.length){n.forEach((function(t){return e(t)}));var c=a.get(n[0]),o=2===n.length?a.get(n[1]):{w:0,h:0},s=Math.max(9,g(r,F)+A),i=Math.max(9,M+T),d=Math.max(s,o.w+1),h=i,u={w:c.w+d,h:o.h+h,d:[{dw:d,dh:0},{dw:0,dh:h}]},l=s,f=Math.max(i,c.h+1),x={w:c.w+l,h:o.h+f,d:[{dw:l,dh:0},{dw:0,dh:f}]},m=Math.max(s,c.w+1),v=i,b={w:o.w+m,h:c.h+v,d:[{dw:0,dh:v},{dw:m,dh:0}]},j=s,p=Math.max(i,o.h+1),w=[u,x,b,{w:o.w+j,h:c.h+p,d:[{dw:0,dh:p},{dw:j,dh:0}]}];w.sort(I),a.set(r,w[0])}else a.set(r,{w:0,h:0})}(e),function(e,t,a){var r=new Map;return function e(n,c,o){r.set(n,{x:c,y:o,radius:1});var s=a.get(n);if(0!==s.length){var i=t.get(n).d;s.forEach((function(t,a){e(t,c+i[a].dw,o+i[a].dh)}))}}(e,0,0),r}(e,a,t)}var M=14,A=4,T=4,k="Bree Serif",_="".concat(M,"px"),F="".concat(_," ").concat(k),G=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(x.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).ref=s.createRef(),e.svg=void 0,e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.draw()}},{key:"componentDidUpdate",value:function(){this.svg.remove(),this.draw()}},{key:"render",value:function(){return Object(h.jsx)("div",{className:"h-100 w-100",ref:this.ref})}},{key:"draw",value:function(){var e,t=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,d=Object(f.a)(this.props.nodes.entries());try{for(d.s();!(e=d.n()).done;){var h=Object(o.a)(e.value,2),u=h[0],l=h[1],x=l.x,m=l.y,v=l.radius;t=Math.min(t,x),a=Math.min(a,m),r=Math.max(r,x),n=Math.max(n,m),r===x&&(c=Math.max(c,g(u,F))),t===x&&(s=Math.max(s,v)),n===m&&(i=Math.max(i,v))}}catch(T){d.e(T)}finally{d.f()}var b=this.ref.current,p=r-t,w=n-a,N=this.props,O=N.width,y=N.height,I=N.nodes,E=N.edges;this.svg=j.a(b).append("svg").attr("cursor","move").attr("width",O).attr("height",y).attr("viewBox",[t-s-5,a-M-5,p+c+s+10,w+M+i+10].join(" ")).call(j.b().on("zoom",(function(e){A.attr("transform",e.transform)})));var A=this.svg.append("g");A.selectAll("circle .nodes").data(I.values()).enter().append("svg:circle").attr("class","nodes").attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).attr("r",(function(e){return e.radius})).attr("stroke","black"),A.selectAll(".line").data(E).enter().append("line").attr("x1",(function(e){return I.get(e.from).x})).attr("y1",(function(e){return I.get(e.from).y})).attr("x2",(function(e){return I.get(e.to).x})).attr("y2",(function(e){return I.get(e.to).y})).style("stroke","black"),A.selectAll("text").data(I.entries()).enter().append("text").text((function(e){return Object(o.a)(e,1)[0]})).attr("x",(function(e){var t=Object(o.a)(e,2)[1];return t.x+t.radius})).attr("y",(function(e){var t=Object(o.a)(e,2)[1];return t.y-t.radius-1})).attr("font-family",k).attr("font-size",_).attr("fill","black").attr("text-anchor","beginning")}}]),a}(s.Component),V=Object(p.a)(G);function C(){var e=s.useState({nodes:new Map,edges:[]}),t=Object(o.a)(e,2),a=t[0],r=t[1],d=Object(i.debounce)(r,500),l=s.useState(""),x=Object(o.a)(l,2),m=x[0],v=x[1];return Object(h.jsx)(n.a,{className:"px-0 mx-0 mw-100 h-100",children:Object(h.jsxs)(n.a,{className:"main-container px-0 mx-0 mw-100 h-100",children:[Object(h.jsx)(n.a,{className:"main-left-panel h-100",children:Object(h.jsx)(u,{value:m,onChange:function(e){v(e);var t=O(e);if(void 0!==t){var a=function(e){var t,a=new Map(Object(y.a)(e.nodes.values()).map((function(e){return[e,[]]}))),r=new Set(e.nodes),n=Object(f.a)(e.edges);try{for(n.s();!(t=n.n()).done;){var c=t.value;a.get(c.from).push(c.to),r.delete(c.to)}}catch(o){n.e(o)}finally{n.f()}return{nodes:E(r.values().next().value,a),edges:e.edges}}(t);d(a)}}})}),Object(h.jsx)(n.a,{className:"main-content px-0 mx-0 h-100",children:Object(h.jsx)(V,Object(c.a)({},a))})]})})}a(97);var S=a(50),Y=a(28);function z(){return Object(h.jsxs)(S.a,{defaultActiveKey:"1",children:[Object(h.jsx)(Y.a,{eventKey:"1",title:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1",children:Object(h.jsx)(C,{})}),Object(h.jsx)(Y.a,{eventKey:"2",title:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2",disabled:!0}),Object(h.jsx)(Y.a,{eventKey:"3",title:"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3",disabled:!0})]})}var K=function(){return Object(h.jsxs)(n.a,{className:"d-flex flex-column border border-secondary px-0 mx-0 mw-100",children:[Object(h.jsx)(n.a,{className:"bg-primary mw-100",children:Object(h.jsxs)(n.a,{children:[Object(h.jsx)("h1",{className:"text-light",children:"\u0421\u0434\u0430\u0447\u0430 \u0437\u0430\u0434\u0430\u043d\u0438\u0439 \u043f\u043e \u043c\u0435\u0442\u043e\u0434\u0430\u043c \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),Object(h.jsx)("p",{className:"text-light",children:"\u0412\u0438\u043d\u043e\u043a\u0443\u0440\u043e\u0432 \u0421\u0435\u0440\u0433\u0435\u0439 \u0421\u0435\u0440\u0433\u0435\u0435\u0432\u0438\u0447"})]})}),Object(h.jsx)(n.a,{className:"content align-self-stretch px-0 mx-0 mw-100",children:Object(h.jsx)(z,{})}),Object(h.jsx)(n.a,{className:"footer bg-secondary mw-100",children:Object(h.jsx)(n.a,{className:"position-relative mw-100",children:Object(h.jsx)("a",{className:"text-light position-absolute end-0",href:"https://github.com/pyspice/visualization_10sem",children:"Github repo"})})})]})};r.render(Object(h.jsx)(K,{}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.38f74b50.chunk.js.map